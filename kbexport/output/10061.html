<h1>Storing attachments inside the database vs. file structures</h1><h2>10061</h2><h3>Introduction</h3><p><P class=MsoNormal style="MARGIN: 0in 0in 0pt">The EncounterPRO Electronic Medical Record Software allows files of any type to be attached to various places in a patient chart.<SPAN style="mso-spacerun: yes">&nbsp; </SPAN>When an attachment is created, two records are created in the EncounterPRO database to represent the file.<SPAN style="mso-spacerun: yes">&nbsp; </SPAN>First, a record is created in the p_Attachment table to represent the file itself.<SPAN style="mso-spacerun: yes">&nbsp; </SPAN>Second, a record is created in one of several p_..._Progress tables to represent which specific clinical object in the patient chart the file is attached to.<SPAN style="mso-spacerun: yes">&nbsp; </SPAN>To store the actual file itself, EncounterPRO offers two options:<SPAN style="mso-spacerun: yes">&nbsp; </SPAN>storage of the file in the database, or storage of the file in Windows Directories outside of the database.<SPAN style="mso-spacerun: yes">&nbsp; </SPAN>The default storage option for any new attachment can be set on a file-type by file-type basis so that, if desired, some file types can be stored in the database at the same time that other file types are stored in Windows Directories.</P><P class=MsoNormal style="MARGIN: 0in 0in 0pt"><?xml:namespace prefix = o ns = "urn:schemas-microsoft-com:office:office" /><o:p>&nbsp;</o:p></P><P class=MsoNormal style="MARGIN: 0in 0in 0pt"><B style="mso-bidi-font-weight: normal">Storing the file in the database<o:p></o:p></B></P><P class=MsoNormal style="MARGIN: 0in 0in 0pt"><o:p>&nbsp;</o:p></P><P class=MsoNormal style="MARGIN: 0in 0in 0pt">If the file is stored in the database, then a Binary Large Object (BLOB) is stored in the p_Attachment_Record itself.<SPAN style="mso-spacerun: yes">&nbsp; </SPAN>This is the simplest and most reliable method because there are no configuration issues, no security issues, and nothing breaks if the server or network architecture is modified.<SPAN style="mso-spacerun: yes">&nbsp; </SPAN>In addition, Microsoft SQL Server allows BLOBs to be stored automatically and transparently on a separate device so that their space requirements and backup strategy can be managed separately from the rest of the structured data in the database.</P><P class=MsoNormal style="MARGIN: 0in 0in 0pt"><o:p>&nbsp;</o:p></P><P class=MsoNormal style="MARGIN: 0in 0in 0pt"><B style="mso-bidi-font-weight: normal">Storing the file in Windows Directories<o:p></o:p></B></P><P class=MsoNormal style="MARGIN: 0in 0in 0pt"><o:p>&nbsp;</o:p></P><P class=MsoNormal style="MARGIN: 0in 0in 0pt">EncounterPRO can also store the attachment files in a set of Windows Directories.<SPAN style="mso-spacerun: yes">&nbsp; </SPAN>To do this EncounterPRO lets the system manager set up one or more “Attachment Locations”.<SPAN style="mso-spacerun: yes">&nbsp; </SPAN>Then each patient must be assigned to a specific attachment location (one of the locations can be designated as the default location for new patients).<SPAN style="mso-spacerun: yes">&nbsp; </SPAN>The system manager can then designate one or more file types to be stored in windows directories instead of in the database.<SPAN style="mso-spacerun: yes">&nbsp; </SPAN>Because of the increased complexity and dependence on network/security configuration, this storage strategy is only recommended if there is a specific need to have direct access to the attachment files from outside EncounterPRO, or if certain very large files (e.g. DICOM images or MPEG files) are incorporated into EncounterPRO.</P><P class=MsoNormal style="MARGIN: 0in 0in 0pt"><o:p>&nbsp;</o:p></P><P class=MsoNormal style="MARGIN: 0in 0in 0pt"><B style="mso-bidi-font-weight: normal">Editing Attachments<o:p></o:p></B></P><P class=MsoNormal style="MARGIN: 0in 0in 0pt"><o:p>&nbsp;</o:p></P><P class=MsoNormal style="MARGIN: 0in 0in 0pt">Note that in some cases EncounterPRO allows attachments to be edited by EncounterPRO users.<SPAN style="mso-spacerun: yes">&nbsp; </SPAN>When this happens, the modified file is always stored as a BLOB in the p_Attachment_Progress table.<SPAN style="mso-spacerun: yes">&nbsp; </SPAN>If the modified attachment is configured to be stored in windows directories instead of the database, then the original attachment file is stored in the p_Attachment table and the modified file is written out to the appropriate windows directory so that external applications will always see the latest version of each attachment.</P></p><h3>Symptom</h3><p></p><h3>Cause</h3><p></p><h3>Workaround</h3><p></p><h3>Resolution</h3><p></p><h3>Notes</h3><p></p>