<h1>How to Implement Barton Schmitt at a Practice</h1><h2>10091</h2><h3>Introduction</h3><p>A stored procedure (jmj_copy_phone_to_BS_list)&nbsp;needs to be run to implement Barton Schmitt at&nbsp;Peds or Family Practice&nbsp;practice.&nbsp; If the practice changes its mind about Barton Schmitt, a&nbsp;different stored procedure (jmj_copy_BS_to_phone_list) needs to be run to convert back to standard&nbsp;telephone templates.&nbsp; If a new practice has a specialty type $FPOB (In configuration versions after 4.05.19) $FPOB needs to be substituted in the&nbsp;stored procedure&nbsp;in place of $FP.</p><h3>Symptom</h3><p></p><h3>Cause</h3><p></p><h3>Workaround</h3><p></p><h3>Resolution</h3><p><P>What I do:</P><P>Run the script below , then go to o_rooms, add a room - BARTON, Barton-Schmitt, 50, $TELEPHONE, OK, , 0001, OK, BartonSchmitt</P><P>Go to o_group_rooms and add a row where the group_id is the same as PHONE belongs to, with room_id BARTON</P><P>Go to Configuration, Workplans, Encounter, Standard EncC Barton Schmitt Telephone Encounter, Edit, create a local copy, click on step, Room assignment, change office, click on Telephone and Barton-Schmitt.</P><P>&nbsp;</P><P>&nbsp;</P><P>--This script converts a regular telphone room into a Barton room.&nbsp; <BR>--This script works for a single office practice only.&nbsp; <BR>--After running this script you need to set the rooms in the <BR>--two Barton Schmitt Telephone Encounter workplans</P><P>SET QUOTED_IDENTIFIER ON <BR>GO<BR>SET ANSI_NULLS ON <BR>GO</P><P>ALTER&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; PROCEDURE jmj_copy_phone_to_BS_list<BR>AS</P><P>UPDATE c_menu_item<BR>SET menu_item = 'BARTON'<BR>WHERE menu_item = 'TelephoneTriage'</P><P>UPDATE c_menu_item_attribute<BR>SET value = 'BARTON'<BR>WHERE value = 'TelephoneTriage'</P><P>UPDATE c_workplan_item<BR>SET ordered_treatment_type = 'BARTON'<BR>WHERE ordered_treatment_type = 'TelephoneTriage'</P><P>UPDATE c_workplan_item_attribute<BR>SET value = 'BARTON'<BR>WHERE value = 'TelephoneTriage'</P><P>UPDATE c_treatment_type<BR>SET status = 'NA'<BR>WHERE treatment_type = 'TelephoneTriage'</P><P>UPDATE c_treatment_type<BR>SET status = 'OK'<BR>WHERE treatment_type = 'BARTON'</P><P><BR>UPDATE c_treatment_type_list<BR>SET treatment_type = 'BARTON'<BR>WHERE treatment_type = 'TelephoneTriage'</P><P>INSERT INTO c_observation_observation_cat<BR>(<BR>&nbsp;treatment_type<BR>&nbsp;,observation_category_id<BR>&nbsp;,observation_id<BR>)</P><P>SELECT&nbsp;distinct<BR>&nbsp;'BARTON'<BR>&nbsp;,'BARTON'<BR>&nbsp;,'DEMO13165'</P><P>FROM c_observation_observation_cat<BR>WHERE NOT EXISTS (select observation_id from c_observation_observation_cat<BR>WHERE observation_category_id = 'BARTON'<BR>AND observation_id = 'DEMO13165')</P><P>INSERT INTO c_observation_observation_cat<BR>(<BR>&nbsp;treatment_type<BR>&nbsp;,observation_category_id<BR>&nbsp;,observation_id<BR>)</P><P>SELECT&nbsp;distinct<BR>&nbsp;'BARTON'<BR>&nbsp;,'BARTON'<BR>&nbsp;,'DEMO14203'</P><P>FROM c_observation_observation_cat<BR>WHERE NOT EXISTS (select observation_id from c_observation_observation_cat<BR>WHERE observation_category_id = 'BARTON'<BR>AND observation_id = 'DEMO14203')</P><P>&nbsp;</P><P>INSERT INTO u_top_20<BR>(<BR>&nbsp;user_id<BR>&nbsp;,top_20_code<BR>&nbsp;,item_text<BR>&nbsp;,item_id<BR>&nbsp;,sort_sequence<BR>)</P><P>SELECT&nbsp;distinct<BR>&nbsp;'$FP'<BR>&nbsp;,'TEST_BARTON'<BR>&nbsp;,'Provider-Initiated Phone Record'<BR>&nbsp;,'DEMO14203'<BR>&nbsp;,2</P><P>FROM u_top_20<BR>WHERE NOT EXISTS (select item_id from u_top_20<BR>WHERE user_id = '$FP'<BR>AND top_20_code = 'TEST_BARTON'<BR>AND item_id = 'DEMO14203')</P><P><BR>INSERT INTO u_top_20<BR>(<BR>&nbsp;user_id<BR>&nbsp;,top_20_code<BR>&nbsp;,item_text<BR>&nbsp;,item_id<BR>&nbsp;,sort_sequence<BR>)</P><P>SELECT&nbsp;distinct<BR>&nbsp;'$FP'<BR>&nbsp;,'TEST_BARTON'<BR>&nbsp;,'Call Information'<BR>&nbsp;,'0^22738'<BR>&nbsp;,1</P><P>FROM u_top_20<BR>WHERE NOT EXISTS (select item_id from u_top_20<BR>WHERE user_id = '$FP'<BR>AND top_20_code = 'TEST_BARTON'<BR>AND item_id = '0^22738')</P><P><BR>INSERT INTO u_top_20<BR>(<BR>&nbsp;user_id<BR>&nbsp;,top_20_code<BR>&nbsp;,item_text<BR>&nbsp;,item_id<BR>&nbsp;,sort_sequence<BR>)</P><P>SELECT&nbsp;distinct<BR>&nbsp;'$PEDS'<BR>&nbsp;,'TEST_BARTON'<BR>&nbsp;,'Provider-Initiated Phone Record'<BR>&nbsp;,'DEMO14203'<BR>&nbsp;,2</P><P>FROM u_top_20<BR>WHERE NOT EXISTS (select item_id from u_top_20<BR>WHERE user_id = '$PEDS'<BR>AND top_20_code = 'TEST_BARTON'<BR>AND item_id = 'DEMO14203')</P><P><BR>INSERT INTO u_top_20<BR>(<BR>&nbsp;user_id<BR>&nbsp;,top_20_code<BR>&nbsp;,item_text<BR>&nbsp;,item_id<BR>&nbsp;,sort_sequence<BR>)</P><P>SELECT&nbsp;distinct<BR>&nbsp;'$PEDS'<BR>&nbsp;,'TEST_BARTON'<BR>&nbsp;,'Call Information'<BR>&nbsp;,'0^22738'<BR>&nbsp;,1</P><P>FROM u_top_20<BR>WHERE NOT EXISTS (select item_id from u_top_20<BR>WHERE user_id = '$PEDS'<BR>AND top_20_code = 'TEST_BARTON'<BR>AND item_id = '0^22738')</P><P><BR>INSERT INTO u_chart_selection<BR>(<BR>&nbsp;chart_id<BR>&nbsp;,specialty_id<BR>&nbsp;,workplan_id<BR>&nbsp;,sort_sequence<BR>)</P><P>SELECT distinct<BR>&nbsp;22<BR>&nbsp;,'$PEDS'<BR>&nbsp;,1723<BR>&nbsp;,6</P><P>FROM u_chart_selection<BR>WHERE NOT EXISTS (SELECT workplan_id from u_chart_selection<BR>WHERE chart_id = 22 AND specialty_id = '$PEDS' AND workplan_id = 1723)<BR>AND NOT EXISTS (SELECT workplan_id from u_chart_selection<BR>WHERE chart_id = 1000022 AND specialty_id = '$PEDS' AND workplan_id = 1001723)</P><P><BR>INSERT INTO u_chart_selection<BR>(<BR>&nbsp;chart_id<BR>&nbsp;,specialty_id<BR>&nbsp;,workplan_id<BR>&nbsp;,sort_sequence<BR>)</P><P>SELECT distinct<BR>&nbsp;22<BR>&nbsp;,'$PEDS'<BR>&nbsp;,1789<BR>&nbsp;,6</P><P>FROM u_chart_selection<BR>WHERE NOT EXISTS (SELECT workplan_id from u_chart_selection<BR>WHERE chart_id = 22 AND specialty_id = '$PEDS' AND workplan_id = 1789)<BR>AND NOT EXISTS (SELECT workplan_id from u_chart_selection<BR>WHERE chart_id = 1000022 AND specialty_id = '$PEDS' AND workplan_id = 1001789)</P><P><BR>INSERT INTO u_chart_selection<BR>(<BR>&nbsp;chart_id<BR>&nbsp;,specialty_id<BR>&nbsp;,workplan_id<BR>&nbsp;,sort_sequence<BR>)</P><P>&nbsp;</P><P>SELECT distinct<BR>&nbsp;33<BR>&nbsp;,'$FP'<BR>&nbsp;,1723<BR>&nbsp;,6</P><P>FROM u_chart_selection<BR>WHERE NOT EXISTS (SELECT workplan_id from u_chart_selection<BR>WHERE chart_id = 33 AND specialty_id = '$FP' AND workplan_id = 1723)<BR>AND NOT EXISTS (SELECT workplan_id from u_chart_selection<BR>WHERE chart_id = 1000033 AND specialty_id = '$FP' AND workplan_id = 1001723)</P><P><BR>INSERT INTO u_chart_selection<BR>(<BR>&nbsp;chart_id<BR>&nbsp;,specialty_id<BR>&nbsp;,workplan_id<BR>&nbsp;,sort_sequence<BR>)</P><P>SELECT distinct<BR>&nbsp;33<BR>&nbsp;,'$FP'<BR>&nbsp;,1789<BR>&nbsp;,6</P><P>FROM u_chart_selection<BR>WHERE NOT EXISTS (SELECT workplan_id from u_chart_selection<BR>WHERE chart_id = 33 AND specialty_id = '$FP' AND workplan_id = 1789)<BR>AND NOT EXISTS (SELECT workplan_id from u_chart_selection<BR>WHERE chart_id = 1000033 AND specialty_id = '$FP' AND workplan_id = 1001789)</P><P>&nbsp;</P><P>UPDATE c_workplan<BR>SET description = 'Barton Schmitt Telephone Encounter WP Local'<BR>WHERE description = 'Barton Schmitt Telephone Encounter WP'<BR>AND owner_id &gt; 1</P><P>UPDATE c_workplan<BR>SET status = 'NA'<BR>WHERE description = 'Barton Schmitt Telephone Encounter WP Local'</P><P>UPDATE c_workplan_selection<BR>SET workplan_id = 1723<BR>WHERE workplan_id = 1001723</P><P>UPDATE u_chart_selection<BR>SET workplan_id = 1723<BR>WHERE workplan_id = 1001723</P><P>UPDATE u_chart_selection<BR>SET chart_id = 33<BR>WHERE chart_id = 1000033</P><P>UPDATE u_chart_selection<BR>SET chart_id = 22<BR>WHERE chart_id = 1000022</P><P>UPDATE c_menu_item<BR>SET button = 'button_barton_schmitt.bmp'<BR>WHERE menu_item_type &lt;&gt; 'TREATMENT'<BR>AND button = 'button_phone_large.bmp'</P><P>UPDATE o_rooms<BR>SET default_encounter_type = 'BartonSchmittProvide'<BR>WHERE default_encounter_type = 'PHONE1'</P><P>UPDATE o_rooms<BR>SET default_encounter_type = 'BartonSchmitt'<BR>WHERE default_encounter_type = 'PHONE'</P><P>INSERT INTO c_encounter_type<BR>(<BR>&nbsp;encounter_type<BR>&nbsp;,description<BR>&nbsp;,sort_order<BR>&nbsp;,bill_flag<BR>&nbsp;,default_indirect_flag<BR>&nbsp;,status<BR>&nbsp;,close_encounter_workplan_id<BR>)</P><P>SELECT &nbsp;distinct<BR>&nbsp;'BartonSchmittProvide'<BR>&nbsp;,'Barton Schmitt Provider-Initiated Call'<BR>&nbsp;,1<BR>&nbsp;,'N'<BR>&nbsp;,'I'<BR>&nbsp;,'OK'<BR>&nbsp;,1326</P><P>FROM c_encounter_type<BR>WHERE NOT EXISTS (SELECT encounter_type FROM<BR>c_encounter_type WHERE encounter_type = 'BartonSchmittProvide')</P><P><BR>INSERT INTO c_workplan_selection<BR>(&nbsp;<BR>&nbsp;encounter_type<BR>&nbsp;,workplan_id<BR>&nbsp;,search_order<BR>)</P><P>SELECT &nbsp;distinct<BR>&nbsp;'BartonSchmittProvide'<BR>&nbsp;,1789<BR>&nbsp;,1</P><P>FROM c_workplan_selection WHERE NOT exists (SELECT encounter_type FROM<BR>c_workplan_selection WHERE encounter_type = 'BartonSchmittProvide')</P><P>UPDATE o_preferences<BR>SET preference_value = 'BARTON'<BR>WHERE preference_value = 'TelephoneTriage'<BR>AND preference_id = 'Favorite Telephone Treatment Type'</P><P>UPDATE p_treatment_item<BR>SET treatment_type = 'BARTON'<BR>WHERE treatment_type = 'TelephoneTriage'</P><P>&nbsp;</P><P>GO<BR>SET QUOTED_IDENTIFIER OFF <BR>GO<BR>SET ANSI_NULLS ON <BR>GO</P><P>&nbsp;</P></p><h3>Notes</h3><p></p>