<h1>Clear All Outstanding Items</h1><h2>10104</h2><h3>Introduction</h3><p>This article explains how to close out items in Utilties -&gt; Outstanding Labs, Tests, Xrays, etc (Never run for Drugs)</p><h3>Symptom</h3><p><BR></p><h3>Cause</h3><p><BR></p><h3>Workaround</h3><p>After following the steps below, run a query like this against the practice's database in Query Analyzer:<BR><BR>DECLARE @ls_cpr_id varchar(12),<BR>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; @ll_treatment_id int,<BR>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; @ll_encounter_id int,<BR>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; @ls_progress_type varchar(24)<BR><BR>DECLARE lc_items CURSOR LOCAL FAST_FORWARD FOR<BR>&nbsp;&nbsp;&nbsp; SELECT t.cpr_id, t.treatment_id, t.open_encounter_id<BR>&nbsp;&nbsp;&nbsp; from p_treatment_item t (NOLOCK)<BR>&nbsp;&nbsp;&nbsp; where t.treatment_type IN (^^^^)<BR>&nbsp;&nbsp;&nbsp; and ISNULL(t.treatment_status, 'OPEN') = 'OPEN'<BR>&nbsp;&nbsp;&nbsp; AND t.begin_date &lt; ####<BR>&nbsp;&nbsp;&nbsp; <BR>SET @ls_progress_type = 'CLOSED'<BR><BR>OPEN lc_items<BR><BR>FETCH lc_items INTO @ls_cpr_id, @ll_treatment_id, @ll_encounter_id<BR>WHILE @@FETCH_STATUS = 0<BR>&nbsp;&nbsp;&nbsp; BEGIN<BR>&nbsp;&nbsp;&nbsp; EXECUTE sp_set_treatment_progress<BR>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; @ps_cpr_id = @ls_cpr_id,<BR>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; @pl_treatment_id = @ll_treatment_id,<BR>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; @pl_encounter_id = @ll_encounter_id,<BR>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; @ps_progress_type = @ls_progress_type,<BR>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; @ps_progress_key = NULL,<BR>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; @ps_progress = NULL,<BR>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; @pdt_progress_date_time = NULL,<BR>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; @ps_user_id = '#SYSTEM',<BR>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; @ps_created_by = '#SYSTEM'<BR>&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp; FETCH lc_items INTO @ls_cpr_id, @ll_treatment_id, @ll_encounter_id<BR>&nbsp;&nbsp;&nbsp; END<BR><BR>CLOSE lc_items<BR>DEALLOCATE lc_items<BR><BR>==================<BR>For the clause <BR>&nbsp;&nbsp;&nbsp; where t.treatment_type IN (^^^^)<BR>Replace "^^^^" with whatever is the corresponding treatment_type.<BR>Example:<BR>Labs, including Xrays: 'biopsy','ct','echo','ekg','mri','NUCLEAR','lab','test','xray'<BR><BR><BR>For the clause <BR>&nbsp;&nbsp;&nbsp; AND t.begin_date &lt; ####<BR>Replace #### with the date up to which the query should be run.<BR>Example1: I<BR>If the practice wants to close all oustanding items of some type from the begining of time to 12/10/2004, replace #### with '12/10/2004'<BR>If the practice wants to close all oustanding items of some type from the begining of time to&nbsp; today, replace #### with getdate()<BR></p><h3>Resolution</h3><p>Instruct the practice on how to set Procedures (for the Labs, Tests) to autoclose.<BR></p><h3>Notes</h3><p><BR></p>