<h1>Migration Errors</h1><h2>10120</h2><h3>Introduction</h3><p>The 2-to-4 migration has two outstanding technical difficulties which might affect the customer.&nbsp; In each case, a determination can be made prior to the migration as to whether the customer would be affected.</p><h3>Symptom</h3><p>The first issue&nbsp;is that old histories from version 2 do not show up in the version 4 PFSH screen.&nbsp; The do show up in the encounter report for the original encounter, but that isn't good enough for any practice which regularly uses PFSH information.&nbsp; The second issue is that if the customer has thousands of custom results for a single observation, then the migration might fail with an "arithmetic overflow" error message.</p><h3>Cause</h3><p><P>The version 4 PFSH screen relies on PFSH data having been entered in one of a set of specific composite observations.&nbsp; In version 2, many history observation were tailored for individual customers so the migration scripts do not know in advance which observations are for which histories.</P><P>In version 2, results created by users on-the-fly are recorded in c_Observation_Result.&nbsp; In some cases a particular observation may have thousands and thousands of such results.&nbsp; The conversion script needs to fit them all into a set of 32,000 results_sequence values in version 4 and with the current&nbsp;conversion algorithm&nbsp;it sometimes&nbsp;runs out of numbers.</P></p><h3>Workaround</h3><p><P>The is currently no fix to either issue.&nbsp; The PFSH problem can only be avoided by confirming with the customer that they do not need the version 2 PFHS data showing up on the PFSH summary screen.&nbsp; This possible for pediatric customers, but unlikely for everyone else.</P><P>The overflow problem cannot yet be fixed, but the following query will determine if the customer is at risk.&nbsp; If the query returns any records at all, then the customer&nbsp;may get an overflow error during migration.&nbsp; If the query returns no rows, then the customer is not likely to experience the problem.&nbsp; Note that beginning with Migration v 4.05.6,&nbsp;the problem, if it exists,&nbsp;will manifest itself during the pre-migration.</P><P>SELECT observation_id, count(*) as result_count<BR>FROM c_Observation<BR>GROUP BY observation_id<BR>HAVING count(*) &gt; 10000<BR></P></p><h3>Resolution</h3><p>The PFSH mapping problem has been identified as a problem and is logged as devissue # 5344.&nbsp; The arethmetic overflow problem has beed identified as a problem ans has been logged as devissue # 5345.&nbsp; Both issues will be fixed in the next release of the migration scripts (4.05.7).</p><h3>Notes</h3><p></p>