<h1>Creating a Database</h1><h2>10130</h2><h3>Introduction</h3><p><p>This article provides information on setting up a customer's database</p></p><h3>Symptom</h3><p><br></p><h3>Cause</h3><p><br></p><h3>Workaround</h3><p><br></p><h3>Resolution</h3><p><p class="MsoNormal" style="margin: 0in 0in 0pt; text-align: center;" align="center"><strong>Creating Database in House</strong></p><p class="MsoNormal" style="margin: 0in 0in 0pt; text-align: center;" align="center">&nbsp;</p><ol type="1"><li class="MsoNormal" style="margin: 0in 0in 0pt;">Get the database (config release) - the location will depend upon which config you are using&nbsp; [at the time this was updated we are using config 19 for peds and family practice located on&nbsp; \\supportserv\Database Backups\New_Install\DB Backup cpr_production-19.exe (config 19)] </li><li class="MsoNormal" style="margin: 0in 0in 0pt;">Save or extract the backup to \\SupportServ\Database Backups (If not already there - config 19 is cpr_405_production.bak) </li><li class="MsoNormal" style="margin: 0in 0in 0pt;">Open enterprise manager and open up the local server group. Create database on “SupportServ” </li><li class="MsoNormal" style="margin: 0in 0in 0pt;">Right click on databases, select “New Database”, name database “cpr_Praticename”, Select “Ok” </li><li class="MsoNormal" style="margin: 0in 0in 0pt;">Right click on “cpr” database, and select “All Tasks”, Select “Restore Database” </li><li class="MsoNormal" style="margin: 0in 0in 0pt;">Select “From Device”, select “Select Devices”, remove any devices listed, select “Add” </li><li class="MsoNormal" style="margin: 0in 0in 0pt;">Locate the “xxxxxx.bak” file (config release from step#2), Select “Ok”. This should take you to the main general tab of restore database. </li><li class="MsoNormal" style="margin: 0in 0in 0pt;">Select on the options tab and verify that 3 logical filenames were created. </li><li class="MsoNormal" style="margin: 0in 0in 0pt;">It will automatically create the logical filenames. You will need to change the file name to your database name. <br><ol><ol><li class="MsoNormal" style="margin: 0in 0in 0pt;">Data logical file should end in .mdf </li><li class="MsoNormal" style="margin: 0in 0in 0pt;">Attachment logical file should end in .ndf </li><li class="MsoNormal" style="margin: 0in 0in 0pt;">Log logical file end in .ldf<br></li></ol></ol></li><li class="MsoNormal" style="margin: 0in 0in 0pt;"><span style="font-size: 12pt; font-family: 'Times New Roman';"><strong><span style="font-weight: normal;"><a href="https://www.jmjtech.com/kb/images//10130/backup.txt"></a></span></strong></span>&nbsp;<img alt="Backup Picture" src="https://www.jmjtech.com/kb/images//10130/backup.jpg" align="bottom" border="0" hspace="0"> </li><li class="MsoNormal" style="margin: 0in 0in 0pt;">Select “Force restore existing database” </li><li class="MsoNormal" style="margin: 0in 0in 0pt;">Select “Ok” </li><li class="MsoNormal" style="margin: 0in 0in 0pt;">Right click on database, select “Properties”, select “Options” uncheck “Read-only” </li><li class="MsoNormal" style="margin: 0in 0in 0pt;">Open Query Analyzer and point to newly created database </li><li class="MsoNormal" style="margin: 0in 0in 0pt;">Run "4.05 Demo DB to a live DB.txt from: NOTE: If database name is not "cpr" do a Find and Replace to update the script accordingly. <a href="file://%5C%5Cwwwserver%5CFtproot%5CEP_Upgrades%5CProduction%5CEncounter_Production_CD%5CNew_Install%5CNew_Installation%5CDemo_DB_to_live_DB.sql">\\wwwserver\Ftproot\EP_Upgrades\Production\Encounter_Production_CD\New_Install\New_Installation\Demo_DB_to_live_DB.sql</a> </li><li class="MsoNormal" style="margin: 0in 0in 0pt;">Run below script in Query. Can also be found on CD&nbsp;under <a href="file://%5C%5Cwwwserver%5CFtproot%5CEP_Upgrades%5CProduction%5CEncounter_Production_CD%5CNew_Install%5CNew_Installation%5CPractice_Configurations_Script.sql">\\wwwserver\Ftproot\EP_Upgrades\Production\Encounter_Production_CD\New_Install\New_Installation\Practice_Configurations_Script.sql</a></li><li class="MsoNormal" style="margin: 0in 0in 0pt;">In this script we will need to do a find and replace on all list files. Ex-custid replace with “XXXX” (where "XXX"=the real customer number). </li><li class="MsoNormal" style="margin: 0in 0in 0pt;">After everything is properly replaced in the script run the script. </li><li class="MsoNormal" style="margin: 0in 0in 0pt;">Create Access Link to Database. Save database link in <a href="file://dellserv/Common/Support/AccessTables/ClientDatabases">\\dellserv\Common\Support\AccessTables\ClientDatabases</a> Instructions for creating this can be found under <a href="https://www.jmjtech.com/kb/Article.aspx?ArticleNumber=10113">Article #10113 - Linking databases to Access tables</a> </li><li class="MsoNormal" style="margin: 0in 0in 0pt;">Create rooms. Go to “o_Rooms”. The easiest way to create a room is by copying and pasting one of the pre-existing rows in the table, and pasting it at the end. (Keep in mind the number sequence). Also add the rooms to “o_Group_Rooms” (keeping in the sequence numbers) </li><li class="MsoNormal" style="margin: 0in 0in 0pt;">If practice has more then one office follow below KB article <ul><li class="MsoNormal" style="margin: 0in 0in 0pt;"><a href="https://192.168.155.2/kb/Article.aspx?ArticleNumber=10210">https://192.168.155.2/kb/Article.aspx?ArticleNumber=10210</a> </li></ul></li><li class="MsoNormal" style="margin: 0in 0in 0pt;">Add all the physicians and nurse practitioners through EncounterPRO or through c_user </li><li class="MsoNormal" style="margin: 0in 0in 0pt;">Update Database to latest Database, Config, Reports and Hotfixes </li><li class="MsoNormal" style="margin: 0in 0in 0pt;">Backup up Database to <a href="file://%5C%5Ctechserv%5CNewCustomerDatabases">\\techserv\NewCustomerDatabases</a>&nbsp;</li></ol><p class="MsoNormal" style="margin: 0in 0in 0pt;"><o:p>&nbsp;</o:p></p><p class="MsoNormal" style="margin: 0in 0in 0pt; text-align: center;" align="center"><strong><u>Creating Database on Site </u></strong></p><p class="MsoNormal" style="margin: 0in 0in 0pt; text-align: center;" align="center">&nbsp;</p><ol><li><div class="MsoNormal" style="margin: 0in 0in 0pt;">Usually the database will already be created. If database is not created follow above steps for creating Database in house </div></li><li class="MsoNormal" style="margin: 0in 0in 0pt;">Copy contents of CD to D:\Install\JMJ </li><li class="MsoNormal" style="margin: 0in 0in 0pt;">Restore Database and name it CPR by following below KB article <ul><li class="MsoNormal" style="margin: 0in 0in 0pt;"><a href="https://192.168.155.2/kb/Article.aspx?ArticleNumber=10280">https://192.168.155.2/kb/Article.aspx?ArticleNumber=10280</a> </li></ul></li><li class="MsoNormal" style="margin: 0in 0in 0pt;">Install EncounterPRO, EPRO SERVER and EPROLIBNET </li><li class="MsoNormal" style="margin: 0in 0in 0pt;">Update Database to latest mod Level, Reports and all hot fixes </li><li class="MsoNormal" style="margin: 0in 0in 0pt;">Open Up EPROSERVER and select Clear Login and Set Login on General Tab </li><li class="MsoNormal" style="margin: 0in 0in 0pt;"><strong><span style="font-weight: normal;">Create CPRFILES by running "make_cpr_files_dirs on D Drive.bat" which can be found on the CD <a href="file://%5C%5CNew_Install%5CNew_Installation">\New_Install\New_Installation</a></span></strong> </li><li class="MsoNormal" style="margin: 0in 0in 0pt;"><strong><span style="font-weight: normal;">Copy EncounterPRO Install Files to CPRFILES\EncounterPRO\Install</span></strong> </li><li class="MsoNormal" style="margin: 0in 0in 0pt;">Create Maintenance jobs by running attached script or also on CD under <span><a href="file://%5C%5Cwwwserver%5CFtproot%5CEP_Upgrades%5CProduction%5CEncounter_Production_CD%5CNew_Install%5CNew_Installation">\New_Install\New_Installation</a><a href="file://NewDBInstall/"></a>&nbsp;</span> <ul><li class="MsoNormal" style="margin: 0in 0in 0pt;"><strong><span style="font-weight: normal;"><a href="https://www.jmjtech.com/kb/images/10130/Maintenance.txt">https://www.jmjtech.com/kb/images//10130/Maintenance.txt</a><o:p></o:p></span></strong> </li></ul></li><li class="MsoNormal" style="margin: 0in 0in 0pt;">Disable all service in o_server_component except for JMJ_SERVERSERVICE </li><li class="MsoNormal" style="margin: 0in 0in 0pt;">Set up Automatic Printing by following KB Article <ul><li><div class="MsoNormal" style="margin: 0in 0in 0pt;"><a href="https://192.168.155.2/kb/Article.aspx?ArticleNumber=10199">https://192.168.155.2/kb/Article.aspx?ArticleNumber=10199</a> </div></li></ul></li><li class="MsoNormal" style="margin: 0in 0in 0pt;">Change server name in c_attachment_location </li><li class="MsoNormal" style="margin: 0in 0in 0pt;">Chart an encounter to ensure that it works </li><li class="MsoNormal" style="margin: 0in 0in 0pt;">Run all SQL Jobs </li><li class="MsoNormal" style="margin: 0in 0in 0pt;">Update and Close Issue. Sent SR to Implementaion Co-ordinator</li></ol><p class="MsoNormal" style="margin: 0in 0in 0pt;"><o:p>&nbsp;</o:p></p></p><h3>Notes</h3><p>Regarding step 17: You can find customer ids here:<br>\\Dellserv\jmjfiles\Users\EP Users New Format.xls<br></p>