<h1>EncounterPRO Server won't run with an old database</h1><h2>10147</h2><h3>Introduction</h3><p>If the database modification level isn't high enough, then sometimes EncounterPRO Server will fail when clicking "Check Now", and sometimes EncounterPRO Server will not start at all.</p><h3>Symptom</h3><p><P>When starting EncounterPRO Server, it exits with an error like this in the event viewer:</P><P>4.05.1.8 (01/10/2005) &gt;&gt;&gt; u_sqlca - (check()) SQL ERROR = (2812) SQLSTATE = 42000<BR>Microsoft OLE DB Provider for SQL Server<BR>Could not find stored procedure 'jmj_startup_check'.<BR></P><P>OR</P><P>When the user clicks "Check Now", it displays an error message that includes something like this at the bottom:</P><P>4.05.1.8 (1/10/2005) &gt;&gt;&gt; u_ds_data - (dberror) DATAWINDOW SQL ERROR = (208) Select error: SQLSTATE = 42S02<BR>Microsoft OLE DB Provider for SQL Server<BR>Invalid object name 'c_Database_Script_Type'.<BR>Dataobject = dw_c_Database_Script_Type<BR>SQL Statement =&nbsp;&nbsp; SELECT&nbsp; c_Database_Script_Type.script_type ,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; c_Database_Script_Type.system_id ,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; c_Database_Script_Type.maintenance_mode ,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; c_Database_Script_Type.current_only_flag ,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; c_Database_Script_Type.maintenance_group&nbsp;&nbsp;&nbsp;&nbsp; FROM c_Database_Script_Type <BR></P><P>4.05.32.27 (3/17/2004) &gt;&gt;&gt; cb_check_now - (buttonclicked) An error occured while checking for upgrades </P><P>&nbsp;</P></p><h3>Cause</h3><p>EncounterPRO Server relies on a stored procedure called jmj_startup_check to make sure the database is operational.&nbsp; If this stored procedure doesn't exist, EncounterPRO Server won't run.&nbsp; Also, some changes were made to the sync management tables in mod level 121.&nbsp; Normally EncounterPRO Server has no trouble recognizing this and making the changes, but sometimes when the database is on an earlier mod level, EncounterPRO Server has trouble downloading the necessary scripts to make the changes.</p><h3>Workaround</h3><p><FONT size=2><P>1) EncounterPRO Server will make an effort to fix the database, even when "Check Now" returns an error.&nbsp; The first thing to try therefore is to restart EncounterPRO Server and click "Check Now" again.</P><P>2) If that doesn't work, or if EncounterPRO doesn't even get that far, then run the following&nbsp;SQL script, then restart EncounterPRO Server and try again.</P><P><SPAN style="FONT-WEIGHT: normal"><A href="https://www.jmjtech.com/kb/images//10147/checknow.txt"><FONT color=#0000ff>https://www.jmjtech.com/kb/images//10147/checknow.txt</FONT></A><?xml:namespace prefix = o ns = "urn:schemas-microsoft-com:office:office" /><o:p></o:p></SPAN> </P></FONT></p><h3>Resolution</h3><p>This has been recogized as a problem with EncounterPRO Server (DevIssue #5422) and will be fixed in EncounterPRO Server version 4.05.2.</p><h3>Notes</h3><p></p>