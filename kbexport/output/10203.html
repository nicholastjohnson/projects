<h1>Duplicate Treatment Orders</h1><h2>10203</h2><h3>Introduction</h3><p><P>&nbsp;</P></p><h3>Symptom</h3><p>Occaisionally, when the user selects one or more treatments from the Assessment Treatment List and clicks "OK", the selected treatments are ordered multiple times.&nbsp; Sometimes EncounterPRO freezes.</p><h3>Cause</h3><p><P>Cause 1:</P><P>EncounterPRO uses a "treatment key" concept to handle formulary and effacacy calculations.&nbsp; The treatment key for most treatments (e.g. drug_id for medications, procedure_id for procedures, observation_id for tests, etc.) are perfectly safe.&nbsp; The treatment key for the treatments which derive from "Activity", such as Encounter Filenote, Ongoing Instruction, etc., use the treatment description as the treatment key.&nbsp; EncounterPRo stores the treatment key for each treatment in a hidden field in the list of treatments.&nbsp; Unfortunately the field can only hold 64 bytes, so any "Activity" treatments with a treatment description in excess of 64 bytes runs the risk of overrunning the field buffer.&nbsp; When this happens, the&nbsp;behavior is&nbsp;unpredictable, but two common behaviors are ordering the selected treatments multiple times and EncounterPRO freezing.</P><P>Cause 2:</P><P>The ordering of the treatments takes about 1 second per treatment, so if the user orders more than just a few and then clicks "Finished", it may appear to them that EncounterPRO didn’t get the click so they click again.&nbsp; The first click is periodically checking to see if any new events need processing in case one of the treatments has an auto-perform service.&nbsp; If the user clicks Finished twice and there aren’t any auto-perform screens, then the second click will actually be processed and start ordering the treatments again.<BR></P></p><h3>Workaround</h3><p><P>Cause 1 is resolved in the EncounterPRO Client build 4.05.34.</P><P>Cause 2 will be fixed in version 5, but version 4 users may avoid the problem by clicking "Finished" only once and waiting at least 10-15 seconds or until the screen goes away before clicking again.</P></p><h3>Resolution</h3><p><P>Cause 1 is resolved in the EncounterPRO Client build 4.05.34.</P><P>Cause 2 has been reported as DevIssue # 7244 and will be fixed in EncounterPRO Version 5.</P><P>&nbsp;</P></p><h3>Notes</h3><p></p>