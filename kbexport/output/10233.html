<h1>GRITS Report produces little or no output</h1><h2>10233</h2><h3>Introduction</h3><p>A common mode of failure for the GRITS report is that after the reportis successfully executed, information is missing from the filesawaiting transfer to the GRITS website.&nbsp; These files are usuallyin a GRITS folder in CPRFILES on the customer's server.<br></p><h3>Symptom</h3><p><ul><li>No error when running GRITS report </li><li>GRITS report is correctly configured </li><li>Running GRITS in historical batch mode produces&nbsp;appropriate&nbsp;results </li><li>Some or all patients who have had vaccines administered do not appear in GRITS flat files </li><li>You may or may not see an warning in the Event Log related to the GRITS Eligibility observation that looks like this:<br><img alt="Event Viewer Warning" src="https://www.jmjtech.com/kb/images/10233/warning.jpg" align="bottom" border="0" hspace="0"></li></ul></p><h3>Cause</h3><p><p>When run in realtime mode (available only in EncounterPRO 4.x) or <strong>non</strong>-historicalbatch mode, only patients who have a GRITS Eligibility observation intheir record at some time will be processed and written to flat files.</p><p>When patients are not getting a GRITS Eligibility code, it isusually because the observation itself, which is supposed to appearwith any vaccines ordered, is not being triggered and the user is notprompted.</p><p>If the GRITS Eligibility code observation is appearing but you getthe warning in the image above when you select a result, it could bethe result of a discrepancy between the c_Observation andc_Observation_Tree tables regarding GRITS observation_id values.<br></p>This may be caused by a duplicate GRITS Eligibility codeobservation. To see if this is the case and how to fix it, go to KB10356</p><h3>Workaround</h3><p><br></p><h3>Resolution</h3><p><p>Workplans or Observation records will have to be createdor&nbsp;repaired to get the GRITS Eligibility codes topopulate&nbsp;properly.</p></p><h3>Notes</h3><p>This query will identify all patients who have had an immunization inthe last 14 days who have never been assigned a GRITS Eligibilitycode.&nbsp; If you require a greater time frame for the query, replace"-14" with an appropriate value.<blockquote style="margin-right: 0px;" dir="ltr"><p><code><font color="#000000">SELECT DISTINCT p.billing_id, dbo.fn_patient_full_name(p.cpr_id) as patient_name, e.encounter_date, t.treatment_description<br>FROM p_Treatment_Item t WITH (NOLOCK)<br>INNER JOIN p_Patient p WITH (NOLOCK)<br>ON t.cpr_id = p.cpr_id<br>INNER JOIN p_Patient_Encounter e WITH (NOLOCK)<br>ON t.cpr_id = e.cpr_id<br>AND t.open_encounter_id = e.encounter_id<br>WHERE t.treatment_type = 'IMMUNIZATION'<br>AND t.begin_date &gt;= convert(datetime, convert(varchar,DATEADD(day, -14, getdate()), 112))<br>AND t.treatment_status = 'CLOSED'<br>AND NOT EXISTS (<br>SELECT 1<br>FROM p_Treatment_Item t2 WITH (NOLOCK)<br>INNER JOIN p_Observation_Result r WITH (NOLOCK)<br>ON t2.cpr_id = r.cpr_id<br>AND t2.treatment_id = r.treatment_id WHERE t.cpr_id = t2.cpr_id<br></font></code><code><font color="#000000">AND t2.treatment_type = 'REPORTOBS')<br>ORDER BY patient_name</font></code></p></blockquote><p><strong>note:</strong> this problem can be caused by following the instructions in <a href="https://www.jmjtech.com/kb/Article.aspx?ArticleNumber=10190" target="main">Cannot insert duplicate key row in object 'c_Observation' when updating Config Level</a>&nbsp;without updating the c_Observation_Tree table.<br></p><p>FURTHERMORE, Only patients who receive a vaccine in a vaccineworkplan will receive a prompt for the GRITS Elligibility Code. Theresult of theGRITS Elligibility Code prompt can be found in p_Observation_Result.  <br></p><p>To find whether a vaccine has been associated with GRITS Elligibility Code, <br></p><ol><li>Go to p_Treatment_Item, filter for this patient's encounter</li><li>Ifthis patient's vaccine does not have a procedure id, this vaccine wasnot entered in a vaccine workplan. (If this patient's vaccine DOES havea procedure id, that does not necessarily mean this vaccine has a GRITSElligibility Code)</li><li>If this patient has a row where treatment_id=REPORTOBS, then copy this treatment_id and filter for this inp_Observation_Result. The column "result" in this table should be theGRITS Elligibility Code for this patient's vaccine. </li></ol></p>