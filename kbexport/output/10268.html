<h1>Database Scrubber</h1><h2>10268</h2><h3>Introduction</h3><p>This article explains what the DB Scrubber does and how to use it.<br></p><h3>Symptom</h3><p><br></p><h3>Cause</h3><p><br></p><h3>Workaround</h3><p><br></p><h3>Resolution</h3><p><br></p><h3>Notes</h3><p><h1>What the DB Scrubber does:</h1><p>The DB Scrubber anonymizes / de-identifies all patient data in a version 4 database by making the following changes</p><ol><li>First and last name are set to some random name, chosen from a listof popular American first and last names (according to the SSA). Middlename is set to a random character. </li><li>The following fields are set to NULL: <ul style="margin-top: 0in;" type="disc"><ol style="margin-top: 0in;" type="1"><ul style="margin-top: 0in;" type="square"><li class="MsoNormal" style="margin: 0in 0in 0pt;">Race </li><li class="MsoNormal" style="margin: 0in 0in 0pt;">Primary_language </li><li class="MsoNormal" style="margin: 0in 0in 0pt;">Marital_status </li><li class="MsoNormal" style="margin: 0in 0in 0pt;">Ssn </li><li class="MsoNormal" style="margin: 0in 0in 0pt;">degree </li><li class="MsoNormal" style="margin: 0in 0in 0pt;">name_prefix </li><li class="MsoNormal" style="margin: 0in 0in 0pt;">name_suffix </li><li class="MsoNormal" style="margin: 0in 0in 0pt;">maiden_name </li><li class="MsoNormal" style="margin: 0in 0in 0pt;">phone_number </li><li class="MsoNormal" style="margin: 0in 0in 0pt;">patient_id </li><li class="MsoNormal" style="margin: 0in 0in 0pt;">date_of_conception </li><li class="MsoNormal" style="margin: 0in 0in 0pt;">referring_provider_id </li><li class="MsoNormal" style="margin: 0in 0in 0pt;">secondary_phone_number </li><li class="MsoNormal" style="margin: 0in 0in 0pt;">email_address </li><li class="MsoNormal" style="margin: 0in 0in 0pt;">address_line_2 </li><li class="MsoNormal" style="margin: 0in 0in 0pt;">religion </li><li class="MsoNormal" style="margin: 0in 0in 0pt;">nationality </li><li class="MsoNormal" style="margin: 0in 0in 0pt;">country </li><li class="MsoNormal" style="margin: 0in 0in 0pt;">financial_class </li><li class="MsoNormal" style="margin: 0in 0in 0pt;">employer </li><li class="MsoNormal" style="margin: 0in 0in 0pt;">employerid </li><li class="MsoNormal" style="margin: 0in 0in 0pt;">department </li><li class="MsoNormal" style="margin: 0in 0in 0pt;">shift </li><li class="MsoNormal" style="margin: 0in 0in 0pt;">job_description </li><li class="MsoNormal" style="margin: 0in 0in 0pt;">start_date </li><li class="MsoNormal" style="margin: 0in 0in 0pt;">termination_date </li><li class="MsoNormal" style="margin: 0in 0in 0pt;">employment_status</li></ul></ol></ul></li><li>The billing_id and cpr_id are set to some random numberbetween 1 and the product of 100 and the count of patients. (The patient'sbilling_id and cpr_id are set to&nbsp;the same number.) </li><li>The patient is assigned a new guid. </li><li>Address is set to some new value based on the billing_id </li><li>The date of birth is set back some number of days between 1 and 20. </li><li>Deletion of all entries in the database for the patient's progress that may indicate a change in the patient's data. </li><li>For each attachment <ol><li>If the attachment is a portrait, it is replaced with an image unique to that patient's age range and sex </li><li>Else if the attachment is of a file type that the program has an example, the attachment is replaced </li><li>Else, the attachment is deleted.</li></ol></li></ol><p>&nbsp;</p><h1>How to use the DB Scrubber:</h1><p><br>1- <span style="font-weight: bold; text-decoration: underline;">CAREFULLY</span><span style="font-weight: bold;"></span>- This is the keyword in usage of this program. It does a lot of stuffthat is not undoable (at this time), and is therefore potentially verydangerous.<br><img alt="DB Scrubber" src="https://www.jmjtech.com/KB/images/10268/10268.bmp" align="bottom" border="0" hspace="0"><br>2-When the program starts, it will remind&nbsp;you (in the progress area)to have a backup of this database already made BEFORE clicking Execute in case any thing should go wrong (e.g, using the rightdatabase name but the wrong server name, or vice versa.).</p><p>3- Enter the name of the server and the database this will be run against.</p><p>4- Click Execute to start the scrubbing. If you change your mind during the scrubbing, click Cancel to cease the scrubbing.</p><p>5- To close the program, click the X.<br></p><h3>Addendum<br> </h3><ul>  <li>If&nbsp; you encounter any problems during the execution, see the Event Viewer for details.</li>  <li>The DB Scrubber installer is here:</li>  <ul>    <li>ftp://ftp.jmjtech.com/EP_Misc_instructions/Programs/</li>  </ul>  <li>The program must be run in the same directory as the data_files directory.</li>  <li>There is no problem with running the scrubber against a db more than once.</li><li>Hitting the Enter key is equivalent to clicking Execute. Hitting the ESC key is equivalent to clicking Cancel.</li>  <li>Cancelling a scrubbing can be problematic, especially if done during the changing of cpr_ids. (If done during the changingof cpr_ids, the data will probably be left corrupted.) If you intend touse a database after a scrubbing has been cancelled and before ascrubbing has been completed, rebuild constraints on all p tablesbefore opening EncounterPRO.</li><li>Thisprogram performs steps 1-8 using SQL Update statements. Thereforethe tempdb will not grow. Since the only way to undo a databasescrubbing is to restore the database, the transaction log does not growsignificantly from the scrubbing.</li>  <li>In previous tests, the program takes about 34 seconds per gigabyte.</li>  <li>It is recommended this program be used in-house against a copy ofa customer's database to reduce chance of running it against the wrongdatabase, but if this is not practical, it should be ok to run theprogram while the practice is seeing patients, as the program will berun against a database the practice is not using.</li>  <li><span style="font-weight: bold;">The program MUST NOT be run against a database the practice is using.</span><br>  </li></ul></p>