<h1>Error message when viewing patient chart</h1><h2>10310</h2><h3>Introduction</h3><p></p><h3>Symptom</h3><p><P>Sometimes when viewing a patient chart in a database migrated from version 2 to version 4, the following error message occurs:</P><P>Cannot insert the value NULL into column 'begin_date', table <A href="mailto:'@objects'">'@objects'</A>; column does not allow nulls. INSERT fails. <BR>Dataobject = dw_sp_get_objects_since_last_encounter <BR>SQL Statement = 1 execute dbo.sp_get_objects_since_last_encounter&nbsp;&nbsp;&nbsp;&nbsp; @ps_cpr_id = '104192', @pl_encounter_id = 1194 <BR></P></p><h3>Cause</h3><p>This error is caused by some missing date values in version 2 not being populated correctly at migration time.</p><h3>Workaround</h3><p><P>To determine which tables/records are missing values, run this script</P><P>-----------------------------------------------------------------------</P><P>select cpr_id<BR>from p_Patient WITH (NOLOCK)<BR>where created IS NULL</P><P>select cpr_id, encounter_id<BR>from p_Patient_Encounter WITH (NOLOCK)<BR>where encounter_date IS NULL</P><P>select cpr_id, problem_id<BR>from p_Assessment WITH (NOLOCK)<BR>where begin_date IS NULL</P><P>select cpr_id, treatment_id<BR>from p_Treatment_Item WITH (NOLOCK)<BR>where begin_date IS NULL</P><P>select cpr_id, observation_sequence<BR>from p_Observation WITH (NOLOCK)<BR>where created IS NULL<BR></P><P>----------------------------------------------------------------</P><P>If p_treatment_item is returning rows then run the following query to fix the NULL treatment begin date and run hotfix 115 to take care of this for future cases. please remember to run the scripts during low-business hours or off-hours.</P><FONT size=2><P>UPDATE t<BR>SET begin_date = COALESCE(t.begin_date, t.created, getdate())<BR>FROM p_treatment_item t<BR>where t.begin_date is null</P><P>&nbsp;</P><P></FONT><BR>&nbsp;</P></p><h3>Resolution</h3><p></p><h3>Notes</h3><p></p>