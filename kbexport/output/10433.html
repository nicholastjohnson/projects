<h1>Error rebuilding constraints for c_External_Observation_Result</h1><h2>10433</h2><h3>Introduction</h3><p></p><h3>Symptom</h3><p><P>When sp_rebuild_constraints is run, it reports an error while processing c_External_Observation_Result like the following:</P><P>Server: Msg 1505, Level 16, State 1, Line 1<BR>CREATE UNIQUE INDEX terminated because a duplicate key was found for index ID 1. Most significant primary key is 'Welch Allyn Vitals'.<BR>Server: Msg 1750, Level 16, State 1, Line 1<BR>Could not create constraint. See previous errors.<BR></P></p><h3>Cause</h3><p>This error is caused by changes to the c_External_Observation_Result table which require an updated primary key specification.&nbsp; These changes are applied to a Mod Level 126 database by Hotfix 61.&nbsp; The sp_rebuild_constraints procedure did not know how to identify and run the updated constraints specification so it ran the original constraints script.</p><h3>Workaround</h3><p><P>Rerun Hotfix 61</P><P>Then run Hotfix 92</P><P>Then run Hotfix 110</P><P>Then run Hotfix 128 (new 6/9/2006)</P><P>Then retry sp_rebuild_constraints.</P><P>(Hotfix 92 modifies the jmj_set_constraints stored procedure which is used by sp_rebuild_constraints to identify the correct constraint scripts.)</P><P>&nbsp;</P></p><h3>Resolution</h3><p>This issue is permanently fixed in database mod level 127</p><h3>Notes</h3><p></p>