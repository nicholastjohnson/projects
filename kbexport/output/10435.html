<h1>Upgrade Procedures for Config, Mod Level   Hot Fixes</h1><h2>10435</h2><h3>Introduction</h3><p></p><h3>Symptom</h3><p></p><h3>Cause</h3><p></p><h3>Workaround</h3><p></p><h3>Resolution</h3><p><p><i style=""><span style="font-family: Arial;"><span style="font-size: 11pt; font-family: Arial;">Create an issue in Outlook and copy this document into the issue. While doing the upgrade if there are any unusual behaviors or problems with the upgrade,&nbsp;then&nbsp;document within the issue&nbsp;exactly what happen. If database is not “CPR” change all instances of CPR to database name<o:p></o:p></span>.</span></i><span style="font-family: Arial;"> <i style=""><o:p></o:p></i></span></p><p class="MsoNormal" style="margin: 0in 0in 0pt;"><span style="font-family: Arial;"><o:p>&nbsp;</o:p></span></p><ol style="margin-top: 0in;" type="1"><li class="MsoNormal" style="margin: 0in 0in 0pt;"><span style="font-family: Arial;">Backup of EncounterPRO or ensure that practice has backup from previous day.<o:p></o:p></span> </li><li class="MsoNormal" style="margin: 0in 0in 0pt;"><span style="font-family: Arial;">Using the Import Data in SQL feature create a new database and copy all tables except p_tables and name it cprpre405 and create Access link to database cprpre405 <o:p></o:p></span></li><li class="MsoNormal" style="margin: 0in 0in 0pt;"><span style="font-family: Arial;">Stop EncounterPRO Services and all instances of EncounterPRO, EPRO Server and EncounterPRO Service<o:p></o:p></span> </li><li class="MsoNormal" style="margin: 0in 0in 0pt;"><span style="font-family: Arial;">Copy entire contents of EncounterPRO CD to the Hard Drive<o:p></o:p></span> </li><li class="MsoNormal" style="margin: 0in 0in 0pt;"><span style="font-family: Arial;">Install EncounterPRO Client <o:p></o:p></span></li><li class="MsoNormal" style="margin: 0in 0in 0pt;"><span style="font-family: Arial;">Install EPRO Server&nbsp;<o:p></o:p></span></li><li class="MsoNormal" style="margin: 0in 0in 0pt;"><span style="font-family: Arial;">Update Database&nbsp;</span><span style="font-size: 11pt;"><span style=""></span></span></li><ol><li class="MsoNormal" style="margin: 0in 0in 0pt;"><span style="font-size: 11pt;"><span style="">1.<span style="" times="" new="" roman="" ;="" font-style="" font-variant="" font-weight="" font-size="" 7pt="" line-height="" font-size-adjust="" none="" font-stretch="" normal="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></span><span style="font-size: 11pt; font-family: Arial;">Openthe DB Maintenance Mode and click on “Updates” tab<o:p></o:p></span><!--[endif]--><p class="MsoNormal" style="margin-left: 0.75in; text-indent: -0.25in;"><!--[if !supportLists]--><span style="font-size: 11pt; font-family: Arial;"><span style="">a.<span style="" times="" new="" roman="" ;="" font-style="" font-variant="" font-weight="" font-size="" 7pt="" line-height="" font-size-adjust="" none="" font-stretch="" normal="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></span><!--[endif]--><span style="font-size: 11pt; font-family: Arial;">Clickon “Reset Remote Server” and verify “Remote Server Set” message pops up.<o:p></o:p></span></p><p class="MsoNormal" style="margin-left: 0.75in; text-indent: -0.25in;"><!--[if !supportLists]--><span style="font-size: 11pt; font-family: Arial;"><span style="">b.<span style="" times="" new="" roman="" ;="" font-style="" font-variant="" font-weight="" font-size="" 7pt="" line-height="" font-size-adjust="" none="" font-stretch="" normal="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="font-size: 11pt; font-family: Arial;">Click on “Check Remote Server” and verifythat “Remote Server Available” message pops up.<o:p></o:p></span></p><p class="MsoNormal" style="margin-left: 0.75in; text-indent: -0.25in;"><!--[if !supportLists]--><span style="font-size: 11pt; font-family: Arial;"><span style="">c.<span style="" times="" new="" roman="" ;="" font-style="" font-variant="" font-weight="" font-size="" 7pt="" line-height="" font-size-adjust="" none="" font-stretch="" normal="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></span><!--[endif]--><span style="font-size: 11pt; font-family: Arial;">Clickon “Updates” tab<o:p></o:p></span></p><p class="MsoNormal" style="margin-left: 0.75in; text-indent: -0.25in;"><!--[if !supportLists]--><span style="font-size: 11pt; font-family: Arial;"><span style="">d.<span style="" times="" new="" roman="" ;="" font-style="" font-variant="" font-weight="" font-size="" 7pt="" line-height="" font-size-adjust="" none="" font-stretch="" normal="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></span><!--[endif]--><span style="font-size: 11pt; font-family: Arial;">Click“Check Now”<o:p></o:p></span></p><p class="MsoNormal" style="margin-left: 0.75in; text-indent: -0.25in;"><!--[if !supportLists]--><span style="font-size: 11pt; font-family: Arial;"><span style="">e.<span style="" times="" new="" roman="" ;="" font-style="" font-variant="" font-weight="" font-size="" 7pt="" line-height="" font-size-adjust="" none="" font-stretch="" normal="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></span><!--[endif]--><span style="font-size: 11pt; font-family: Arial;">On“Utility Scripts” tab, scroll down to “Sync <span class="SpellE">c_Database_Table</span>”and execute script<o:p></o:p></span></p><p class="MsoNormal" style="margin-left: 0.75in; text-indent: -0.25in;"><!--[if !supportLists]--><span style="font-size: 11pt; font-family: Arial;"><span style="">f.<span style="" times="" new="" roman="" ;="" font-style="" font-variant="" font-weight="" font-size="" 7pt="" line-height="" font-size-adjust="" none="" font-stretch="" normal="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></span><!--[endif]--><span style="font-size: 11pt; font-family: Arial;">Upgrade“Database” to current mod level<o:p></o:p></span></p><p class="MsoNormal" style="margin-left: 0.75in; text-indent: -0.25in;"><!--[if !supportLists]--><span style="font-size: 11pt; font-family: Arial;"><span style="">g.<span style="" times="" new="" roman="" ;="" font-style="" font-variant="" font-weight="" font-size="" 7pt="" line-height="" font-size-adjust="" none="" font-stretch="" normal="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></span><!--[endif]--><span style="font-size: 11pt; font-family: Arial;">RestartDB Maintenance Mode if “Reports” doesn’t appear yet<o:p></o:p></span></p><p class="MsoNormal" style="margin-left: 0.75in; text-indent: -0.25in;"><!--[if !supportLists]--><span style="font-size: 11pt; font-family: Arial;"><span style="">h.<span style="" times="" new="" roman="" ;="" font-style="" font-variant="" font-weight="" font-size="" 7pt="" line-height="" font-size-adjust="" none="" font-stretch="" normal="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></span><!--[endif]--><span style="font-size: 11pt; font-family: Arial;">Upgrade“Reports”<o:p></o:p></span></p><p class="MsoNormal" style="margin-left: 0.75in; text-indent: -0.25in;"><!--[if !supportLists]--><span style="font-size: 11pt; font-family: Arial;"><span style="">i.<span style="" times="" new="" roman="" ;="" font-style="" font-variant="" font-weight="" font-size="" 7pt="" line-height="" font-size-adjust="" none="" font-stretch="" normal="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></span><!--[endif]--><span style="font-size: 11pt; font-family: Arial;">Runall “Hot Fixes”<o:p></o:p></span></p><p class="MsoNormal" style="margin-left: 0.25in; text-indent: -0.25in;"><!--[if !supportLists]--><span style="font-size: 11pt;"><span style="">2.<span style="" times="" new="" roman="" ;="" font-style="" font-variant="" font-weight="" font-size="" 7pt="" line-height="" font-size-adjust="" none="" font-stretch="" normal="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></span><!--[endif]--><span style="font-size: 11pt; font-family: Arial;">BackupDatabase and call it premid405.bak (Optional)<o:p></o:p></span></p><p class="MsoNormal" style="margin-left: 0.75in; text-indent: -0.25in;"><!--[if !supportLists]--><span style="font-size: 11pt; font-family: Arial;"><span style="">a.<span style="" times="" new="" roman="" ;="" font-style="" font-variant="" font-weight="" font-size="" 7pt="" line-height="" font-size-adjust="" none="" font-stretch="" normal="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></span><!--[endif]--><span style="font-size: 11pt; font-family: Arial;">On“Utility Scripts” tab, scroll down to “Reset Identity Seeds” and execute script<o:p></o:p></span></p><p class="MsoNormal" style="margin-left: 0.25in; text-indent: -0.25in;"><!--[if !supportLists]--><span style="font-size: 11pt;"><span style="">3.<span style="" times="" new="" roman="" ;="" font-style="" font-variant="" font-weight="" font-size="" 7pt="" line-height="" font-size-adjust="" none="" font-stretch="" normal="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></span><!--[endif]--><span style="font-size: 11pt; font-family: Arial;">Openthe DB Maintenance Mode and click on “Updates” tab<o:p></o:p></span></p><p class="MsoNormal" style="margin-left: 0.75in; text-indent: -0.25in;"><!--[if !supportLists]--><span style="font-size: 11pt; font-family: Arial;"><span style="">a.<span style="" times="" new="" roman="" ;="" font-style="" font-variant="" font-weight="" font-size="" 7pt="" line-height="" font-size-adjust="" none="" font-stretch="" normal="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></span><!--[endif]--><span style="font-size: 11pt; font-family: Arial;">Upgrade“Config”<o:p></o:p></span></p><p class="MsoNormal" style="margin-left: 0.25in; text-indent: -0.25in;"><!--[if !supportLists]--><span style="font-size: 11pt;"><span style="">4.<span style="" times="" new="" roman="" ;="" font-style="" font-variant="" font-weight="" font-size="" 7pt="" line-height="" font-size-adjust="" none="" font-stretch="" normal="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></span><!--[endif]--><span style="font-size: 11pt; font-family: Arial;">CloseEncounterPRO DB Maintenance Mode<o:p></o:p></span></p><p class="MsoNormal" style="margin-left: 0.25in; text-indent: -0.25in;"><!--[if !supportLists]--><span style="font-size: 11pt;"><span style="">5.<span style="" times="" new="" roman="" ;="" font-style="" font-variant="" font-weight="" font-size="" 7pt="" line-height="" font-size-adjust="" none="" font-stretch="" normal="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></span><!--[endif]--><span style="font-size: 11pt; font-family: Arial;">Dumpthe transaction log using the following script<o:p></o:p></span></p><p class="MsoNormal" style="margin-left: 0.75in; text-indent: -0.25in;"><!--[if !supportLists]--><span style="font-size: 11pt; font-family: Arial;"><span style="">a.<span style="" times="" new="" roman="" ;="" font-style="" font-variant="" font-weight="" font-size="" 7pt="" line-height="" font-size-adjust="" none="" font-stretch="" normal="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></span><!--[endif]--><span style="font-size: 11pt; font-family: Arial;">DUMPTRANSACTION <b style="">cpr</b> WITH NO_LOG<o:p></o:p></span></p><p class="MsoNormal" style="margin-left: 0.25in; text-indent: -0.25in;"><!--[if !supportLists]--><span style="font-size: 11pt;"><span style="">6.<span style="" times="" new="" roman="" ;="" font-style="" font-variant="" font-weight="" font-size="" 7pt="" line-height="" font-size-adjust="" none="" font-stretch="" normal="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></span><!--[endif]--><span style="font-size: 11pt; font-family: Arial;">Check<span class="SpellE">c_menu</span> and <span class="SpellE">c_workplan</span> to makesure that there are the same amount of records that are in the master<o:p></o:p></span></p><p class="MsoNormal" style="margin-left: 0.25in; text-indent: -0.25in;"><!--[if !supportLists]--><span style="font-size: 11pt;"><span style="">7.<span style="" times="" new="" roman="" ;="" font-style="" font-variant="" font-weight="" font-size="" 7pt="" line-height="" font-size-adjust="" none="" font-stretch="" normal="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></span><!--[endif]--><span style="font-size: 11pt; font-family: Arial;">RunDB Scripts from Utility tab (for 126<a href="../images/10331/DBScripts126.txt"> click here</a>)<o:p></o:p></span></p><p class="MsoNormal" style="margin-left: 0.25in; text-indent: -0.25in;"><!--[if !supportLists]--><span style="font-size: 11pt;"><span style="">8.<span style="" times="" new="" roman="" ;="" font-style="" font-variant="" font-weight="" font-size="" 7pt="" line-height="" font-size-adjust="" none="" font-stretch="" normal="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></span><!--[endif]--><span style="font-size: 11pt; font-family: Arial;">Re-runall <span class="SpellE">Hotfixes</span> <o:p></o:p></span></p><p class="MsoNormal" style="margin-left: 0.25in; text-indent: -0.25in;"><!--[if !supportLists]--><span style="font-size: 11pt;"><span style="">9.<span style="" times="" new="" roman="" ;="" font-style="" font-variant="" font-weight="" font-size="" 7pt="" line-height="" font-size-adjust="" none="" font-stretch="" normal="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></span><!--[endif]--><span style="font-size: 11pt; font-family: Arial;">RunModified Medication Repair Utility from Tools Tab on EPRO Server<o:p></o:p></span></p><p class="MsoNormal" style="margin-left: 0.25in; text-indent: -0.25in;"><!--[if !supportLists]--><span style="font-size: 11pt;"><span style="">10.<span style="" times="" new="" roman="" ;="" font-style="" font-variant="" font-weight="" font-size="" 7pt="" line-height="" font-size-adjust="" none="" font-stretch="" normal="">&nbsp;&nbsp;</span></span></span><!--[endif]--><span style="font-size: 11pt; font-family: Arial;">Deleteold SQL Jobs and create SQL Jobs “<a href="../images/10331/4.0MaintenanceScripts.txt">4.0Maintenance Jobs</a>” (If they are a MPT practice consult with them first)<o:p></o:p></span></p><p class="MsoNormal" style="margin-left: 0.25in; text-indent: -0.25in;"><!--[if !supportLists]--><span style="font-size: 11pt;"><span style="">11.<span style="" times="" new="" roman="" ;="" font-style="" font-variant="" font-weight="" font-size="" 7pt="" line-height="" font-size-adjust="" none="" font-stretch="" normal="">&nbsp;&nbsp;</span></span></span><!--[endif]--><span style="font-size: 11pt; font-family: Arial;">Createa one time schedule on Rebuild job to run when no one is seeing patients(usually at night)<o:p></o:p></span></p><p class="MsoNormal" style="margin-left: 0.25in; text-indent: -0.25in;"><!--[if !supportLists]--><span style="font-size: 11pt;"><span style="">12.<span style="" times="" new="" roman="" ;="" font-style="" font-variant="" font-weight="" font-size="" 7pt="" line-height="" font-size-adjust="" none="" font-stretch="" normal="">&nbsp;&nbsp;</span></span></span><!--[endif]--><span style="font-size: 11pt; font-family: Arial;">ShrinkDB in SQL to 5 %<o:p></o:p></span></p><!--[if !supportLists]--><span style="font-size: 11pt;"><span style="">13.<span style="" times="" new="" roman="" ;="" font-style="" font-variant="" font-weight="" font-size="" 7pt="" line-height="" font-size-adjust="" none="" font-stretch="" normal="">&nbsp;&nbsp;</span></span></span><!--[endif]--><span style="font-size: 11pt; font-family: Arial;">IfTRN Log does not shrink <a href="../images/10331/ShrinkTransactionLog.txt"><span class="SpellE">Shrink</span> Transaction Log</a> to 1000 MB</span></li></ol><li class="MsoNormal" style="margin: 0in 0in 0pt;"><span style="font-family: Arial;">Run all Hotfixes <o:p></o:p></span></li><li class="MsoNormal" style="margin: 0in 0in 0pt;"><span style="font-family: Arial;">Run Modified Medication Repair Utility from Tools Tab on EPRO Server <o:p></o:p></span></li><li class="MsoNormal" style="margin: 0in 0in 0pt;"><span style="font-family: Arial;"><span style="font-size: 11pt; font-family: Arial;">Delete old SQL Jobs and create SQL Jobs “<a href="ftp://www.jmjtech.com/EP_Upgrades/Production/Encounter_Production_CD/New_Install/New_Installation/Configure_Maintenance_Script.sql">4.0 Maintenance Jobs</a>” (If they are a MPT practice consult with them first)</span></span> </li><li class="MsoNormal" style="margin: 0in 0in 0pt;"><span style="font-family: Arial;"><span style="font-size: 11pt; font-family: Arial;"></span><span style="font-size: 11pt; font-family: Arial;">Create a one time schedule on Rebuild job to run when no one is seeing patients (usually at night)</span><span style="font-size: 11pt; font-family: Arial;"></span></span> </li><li class="MsoNormal" style="margin: 0in 0in 0pt;"><span style="font-family: Arial;"><span style="font-size: 11pt; font-family: Arial;">Shrink DB in SQL to 5 %</span></span> </li><li class="MsoNormal" style="margin: 0in 0in 0pt;"><span style="font-family: Arial;"><span style="font-size: 11pt; font-family: Arial;"></span><span style="font-size: 11pt;"><span style=""><span style="font-family: 'Times New Roman'; font-style: normal; font-variant: normal; font-weight: normal; font-size: 7pt; line-height: normal; font-size-adjust: none; font-stretch: normal;">&nbsp;</span></span></span><span style="font-size: 11pt; font-family: Arial;">If TRN Log does not shrink <a href="https://www.jmjtech.com/kb/images/10331/ShrinkTransactionLog.txt"><span class="SpellE">Shrink</span> Transaction Log</a> to 1000 MB<o:p></o:p></span></span><span style="font-family: Arial;">Copy client files </span></li><li class="MsoNormal" style="margin: 0in 0in 0pt;"><span style="font-family: Arial;"></span><span style="font-family: Arial;">Create “EncounterPRO” directory under CPRFiles\Install if not already created <o:p></o:p></span></li><li class="MsoNormal" style="margin: 0in 0in 0pt;"><span style="font-family: Arial;">Copy client install files to the EncounterPRO directory<o:p></o:p></span> </li><li class="MsoNormal" style="margin: 0in 0in 0pt;"><span style="font-family: Arial;">Disable old Services and turn on EncounterPRO Services. Ensure that they successfully start. Delete all old user accounts from Active Directory <o:p></o:p></span></li><li class="MsoNormal" style="margin: 0in 0in 0pt;"><span style="font-family: Arial;">If client is on Millbrook ensure that the application opens successfully.&nbsp; <o:p></o:p></span></li><li class="MsoNormal" style="margin: 0in 0in 0pt;"><span style="font-family: Arial;">RAR the pre-upgrade backup <o:p></o:p></span></li><li class="MsoNormal" style="margin: 0in 0in 0pt;"><span style="font-family: Arial;">Schedule a task in the Issues calendar, cc jmj-support, to delete the pre-upgrade backup one week after the upgrade <o:p></o:p></span></li></ol></p><h3>Notes</h3><p></p>