<h1>Purge non-patient messages older than 6 months</h1><h2>10510</h2><h3>Introduction</h3><p>this article explains how to purge the non-patient (in-office) messages from wp item tables.</p><h3>Symptom</h3><p><P>a) practices decides to permanently delete the non-patient messages older than 'N'(ie 6 or 3)&nbsp;months</P></p><h3>Cause</h3><p></p><h3>Workaround</h3><p></p><h3>Resolution</h3><p><P><STRONG><U>Version 4</U></STRONG></P><P>we can do this in 2 ways.</P><P>a) permanently delete them from wp table by executing the following query. the below query keeps only last 6 months messages and deletes the rest of them. make sure you get a written approval from the practice before doing this. also try to do this during non-business hours.</P><P>delete from p_patient_wp_item where cpr_id is null and ordered_service='MESSAGE' and created &lt; dateadd(month,-6,getdate())</P><P>b) archieve these messages into archieve tables and free up the wp item tables. currently the archieve of "messages" are not enabled. if necessary we'll make the enhancements to our archieve procedures.</P><P><STRONG><U>Version 2</U></STRONG></P><P><EM><FONT color=#ee82ee><STRONG>Below query deletes all the non-patient messages sent from inactive users</STRONG></FONT></EM></P><P>DELETE FROM todo<BR>FROM c_user u,u_todo_list todo<BR>WHERE todo.service='MESSAGE' <BR>AND todo.ordered_by=u.user_id <BR>AND u.user_status='NA'</P><P><STRONG><EM><FONT color=#ee82ee>Below query deletes all the non-patient messages older than N&nbsp; months </FONT></EM>(example below deletes 6 months old data)</STRONG></P><P>DELETE FROM u_todo_list<BR>WHERE service='MESSAGE' <BR>AND todo_date_time &lt; dateadd(month,-6,getdate())</P></p><h3>Notes</h3><p></p>