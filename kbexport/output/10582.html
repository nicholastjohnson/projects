<h1>EncounterPRO freeze while picking assessments</h1><h2>10582</h2><h3>Introduction</h3><p>this article explains why and when encounterpro freeze up while picking assessments ..</p><h3>Symptom</h3><p>a) if there is a location domain defined for an assessment but that location domain does not exist in c_location. so clicking on those assessments brought up a popup (empty&nbsp;but it&nbsp;supposed to display no locations defined for this) screen with OK button. clicking OK it closes the popup but freeze encounterpro. (it is because the parent window&nbsp;lost its&nbsp;focus after a popup is closed)</p><h3>Cause</h3><p>it is because the assessment location domain does not exist in c_location and so a popup showed&nbsp;up to notify this. after closing the popup&nbsp;the focus is not set to parent window&nbsp;and so it frooze epro.</p><h3>Workaround</h3><p><P>a permanent fix needs to be made to manually set the focus to parent window. for now you can just NULL the location domains for the assessments whose location domains are not having a valid link in c_location. running the following query takes care of those orphan location domains in c_assessment_definition.</P><P>&nbsp;</P><P>declare @ls_assessment_id varchar(50),<BR>&nbsp;@ls_location_domain varchar(50)</P><P>&nbsp;DECLARE lc_items CURSOR LOCAL FAST_FORWARD FOR<BR>&nbsp;&nbsp;SELECT distinct assessment_id,location_domain<BR>&nbsp;&nbsp;FROM c_assessment_definition a<BR>&nbsp;&nbsp;where location_domain is not null and not exists<BR>&nbsp;&nbsp;(<BR>&nbsp;&nbsp;select * from c_location c<BR>&nbsp;&nbsp;where c.location_domain=a.location_domain<BR>&nbsp;&nbsp;)<BR>&nbsp;<BR>&nbsp;<BR>&nbsp;OPEN lc_items</P><P>&nbsp;FETCH lc_items INTO @ls_assessment_id,@ls_location_domain<BR>&nbsp;WHILE @@FETCH_STATUS = 0<BR>&nbsp;&nbsp;BEGIN<BR>&nbsp;&nbsp;&nbsp;update c_assessment_definition<BR>&nbsp;&nbsp;&nbsp;set location_domain = null<BR>&nbsp;&nbsp;&nbsp;where <A href="mailto:assessment_id=@ls_assessment_id">assessment_id=@ls_assessment_id</A><BR>&nbsp;&nbsp;&nbsp;and <A href="mailto:location_domain=@ls_location_domain">location_domain=@ls_location_domain</A><BR>&nbsp;<BR>&nbsp;&nbsp;FETCH lc_items INTO @ls_assessment_id,@ls_location_domain<BR>&nbsp;&nbsp;END</P><P>&nbsp;CLOSE lc_items<BR>&nbsp;DEALLOCATE lc_items<BR></P><P>&nbsp;</P></p><h3>Resolution</h3><p>windows supposed to get this auto focus after a child window is closed but it is not doing it. so we need to manually set the focus after closing a popup window. A dev issue#7125 is created to do a permanent fix in future builds.</p><h3>Notes</h3><p></p>