<h1>CHECK CONSTRAINT fails during sp_rebuild_constraints</h1><h2>10657</h2><h3>Introduction</h3><p></p><h3>Symptom</h3><p>sp_rebuild_constraints fails with this error message:<br><br><br>Start rebuilding constraints for p_Patient_WP_Item [SQLSTATE 01000]<br>Msg 547, Sev 16: ALTER TABLE statement conflicted with TABLE CHECK constraint 'ck_p_Patient_WP_Item_in_office_flag'. The conflict occurred in database 'cpr', table 'p_Patient_WP_Item'. [SQLSTATE 23000]</p><h3>Cause</h3><p>This error is caused by a record in p_Patient_WP_Item that is marked as an in-office task but for which there is no associated encounter.&nbsp; This state should never happen.<br></p><h3>Workaround</h3><p></p><h3>Resolution</h3><p>Run the DB Maintenance program.&nbsp; On the "Utility Scripts" tab, run the utility script titled "Fix p_Patient_WP_Item in_office_flag".<br><br>WARNING!!! This script may take 1-15 minutes to complete and it WILL lock out EncounterPRO users while it is running.&nbsp; Make sure there are no EncounterPRO users in the system or they are warned of the temporary freeze before this script is executed.<br></p><h3>Notes</h3><p></p>