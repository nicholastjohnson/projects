<h1>How to setup and check the NFS link between Medical ManagerUNIX vs EncounterPRO</h1><h2>10680</h2><h3>Introduction</h3><p>This article explains how to establish the connectivity between UNIX and Windows for medical manager interface using NFS s/w.</p><h3>Symptom</h3><p><P>In the case of existing medical manager vs encounterpro established sites if the client is reporting,</P><BLOCKQUOTE dir=ltr style="MARGIN-RIGHT: 0px"><P>a) medical manager is not getting the charge messages</P><P>b) medical manager is not sending the demographic and check in messages</P><P> </P></BLOCKQUOTE></p><h3>Cause</h3><p>1) connectivity is broken or not established between UNIX vs Windows using NFS s/w.</p><h3>Workaround</h3><p></p><h3>Resolution</h3><p><P>For all the medical manager EncounterPRO and Norman team uses "pmshare" as the shared folder to exchange messages between EncounterPRO vs medical manager interface. In order to do that EncounterPRO purchases and installs the NFS s/w on the windows box and setup and share a folder pmshare. </P><UL><LI>If it is a new setup then config the NFS share as shown below otherwise make sure it is already set as below.</LI><OL><LI>  Go to the NFS Sharing tab on the shared folder.</LI><LI>click the "Shared" radio button.</LI><LI>on expoorted symbol, enter "/JMJ/PMSHARE"</LI><LI>On the NFS Access Restriction, select "Granted Access" & on the Directory Access Rights select "Read/Write".</LI></OL><LI><FONT face="Courier New">If it is an existing setup but the interface is not working then check to make sure the connection between unix and windows is still up by running the steps below.</FONT></LI><FONT face="Courier New"><UL><LI>go to command prompt and run "telnet (unix ip address found in the customer profile)"</LI><LI>enter the unix login as "root" and pwd (found in the customer profile)</LI><LI>when you see a list of options just type "sh" to go the unix prompt</LI><LI>to check the connectivity is there then type "mount" and enter. It will show you the list of mounts available. if you do not see a mount that is established to windows ip then try typing in the following command and hit enter. this will establish the connection between windows and unix.</LI></UL></UL><BLOCKQUOTE dir=ltr style="MARGIN-RIGHT: 0px"><BLOCKQUOTE dir=ltr style="MARGIN-RIGHT: 0px"><P>mount -f NFS (windows ip address of encounterpro server which can be obtained by typing ipconfig in a fresh command prompt):/jmj/pmshare /usr2/jmjshare</P><P> </P></BLOCKQUOTE></BLOCKQUOTE><P dir=ltr>You can see detailed the detailed instructions under Notes which explain the step by step details of NFS setup. But the above steps should help you to identify and check/establish to solve connection problems.</FONT></P></p><h3>Notes</h3><p><P class=MsoPlainText style="MARGIN: 0in 0in 0pt"><SPAN style="FONT-FAMILY: 'Courier New'">Make or check a mount instructions:<?xml:namespace prefix = o ns = "urn:schemas-microsoft-com:office:office" /><o:p></o:p></SPAN></P><P class=MsoPlainText style="MARGIN: 0in 0in 0pt"><SPAN style="FONT-FAMILY: 'Courier New'"><o:p> </o:p></SPAN></P><P class=MsoPlainText style="MARGIN: 0in 0in 0pt"><SPAN style="FONT-FAMILY: 'Courier New'">1- Log in to the unix server by telnetting into it from the windows server of the practice.<o:p></o:p></SPAN></P><P class=MsoPlainText style="MARGIN: 0in 0in 0pt"><SPAN style="FONT-FAMILY: 'Courier New'">Ex: From Snellvile Pediatrics, go to Start, Run, cmd, telnet 192.168.100.10, root, (root password). <o:p></o:p></SPAN></P><P class=MsoPlainText style="MARGIN: 0in 0in 0pt"><SPAN style="FONT-FAMILY: 'Courier New'"><SPAN style="mso-tab-count: 1">      </SPAN>a- If the server asks for the terminal input type (Ex: (TERM) = (ANSI)), just hit enter to continue. <o:p></o:p></SPAN></P><P class=MsoPlainText style="MARGIN: 0in 0in 0pt"><SPAN style="FONT-FAMILY: 'Courier New'"><SPAN style="mso-tab-count: 1">      </SPAN>b- if the terminal does not go straight into a unix command prompt but rather gives you a list of options (Ex ABC Corpus), enter "sh" to enter the shell.<o:p></o:p></SPAN></P><P class=MsoPlainText style="MARGIN: 0in 0in 0pt"><SPAN style="FONT-FAMILY: 'Courier New'"><o:p> </o:p></SPAN></P><P class=MsoPlainText style="MARGIN: 0in 0in 0pt"><SPAN style="FONT-FAMILY: 'Courier New'">2- run the command mount to check if the mount already exists. <o:p></o:p></SPAN></P><P class=MsoPlainText style="MARGIN: 0in 0in 0pt"><SPAN style="FONT-FAMILY: 'Courier New'"><SPAN style="mso-tab-count: 1">      </SPAN>If the mount does exist and you are checking it's read-write integrity skip ahead to step 5. <o:p></o:p></SPAN></P><P class=MsoPlainText style="MARGIN: 0in 0in 0pt"><SPAN style="FONT-FAMILY: 'Courier New'"><SPAN style="mso-tab-count: 1">      </SPAN>Else, if the mount does not exist and you wish to create it: run this command: mount -f NFS (windows server IP):(nfs shared path of the pmshare dir on windows server) (path of mount folder on unix server)<o:p></o:p></SPAN></P><P class=MsoPlainText style="MARGIN: 0in 0in 0pt"><SPAN style="FONT-FAMILY: 'Courier New'">Ex: at Snellville: mount -f NFS 192.168.100.1:/jmj/pmshare /usr2/jmjshare<o:p></o:p></SPAN></P><P class=MsoPlainText style="MARGIN: 0in 0in 0pt"><SPAN style="FONT-FAMILY: 'Courier New'"><SPAN style="mso-tab-count: 1">      </SPAN>Else, if you wish to make the mount command automatically run when the server is rebooted, cd to dir /etc/rc.d/8 and edit (or create) the file userdef.<o:p></o:p></SPAN></P><P class=MsoPlainText style="MARGIN: 0in 0in 0pt"><SPAN style="FONT-FAMILY: 'Courier New'"><o:p> </o:p></SPAN></P><P class=MsoPlainText style="MARGIN: 0in 0in 0pt"><SPAN style="FONT-FAMILY: 'Courier New'">3- Create/edit the file userdef: After navigating to /etc/rc.d/8: Enter this command: vi userdef. Then use the arrow keys to navigate to the line where you wish to enter the mount command. Then press the i key to enter insert mode. Enter* these three lines (replacing the variables in parentheses with actual values:<o:p></o:p></SPAN></P><P class=MsoPlainText style="MARGIN: 0in 0in 0pt"><SPAN style="FONT-FAMILY: 'Courier New'">echo Mounting JMJ share <o:p></o:p></SPAN></P><P class=MsoPlainText style="MARGIN: 0in 0in 0pt"><SPAN style="FONT-FAMILY: 'Courier New'">mount -f NFS (windows server IP):(nfs shared path of the pmshare dir on windows server) (path of mount folder on unix server)<o:p></o:p></SPAN></P><P class=MsoPlainText style="MARGIN: 0in 0in 0pt"><SPAN style="FONT-FAMILY: 'Courier New'">echo JMJ share mounted<o:p></o:p></SPAN></P><P class=MsoPlainText style="MARGIN: 0in 0in 0pt"><SPAN style="FONT-FAMILY: 'Courier New'"><SPAN style="mso-tab-count: 1">      </SPAN>Then, press the Esc key to exit insert mode. Then press :wq to save the changes and exit vi. You can verify the text you entered was entered correctly by running this command: more userdef. (At the end of the document, hit enter to continue.) <o:p></o:p></SPAN></P><P class=MsoPlainText style="MARGIN: 0in 0in 0pt"><SPAN style="FONT-FAMILY: 'Courier New'"><SPAN style="mso-tab-count: 1">      </SPAN>*Be careful not to try to copy and paste these lines from this document into the unix shell; unix doesn't respect the Ctrl key as much as windows does; it's a useful key in unix, but it can cause funky stuff if you try to use it in unix like you use it in Windows.<o:p></o:p></SPAN></P><P class=MsoPlainText style="MARGIN: 0in 0in 0pt"><SPAN style="FONT-FAMILY: 'Courier New'"><SPAN style="mso-tab-count: 1">      </SPAN>If you made a mistake in the text entered, don't worry, just re-enter the file with the same command (vi userdef) arrow the line you wish to edit. Before entering insert mode, if there is a single character you wish to delete, put the cursor on that character and press the x key. (NOTE: there is an extensive list of other shortcuts and tricks in vi. See David Strube or the internet for details.) Then enter insert mode to enter any text you wish. Save and close as before.<o:p></o:p></SPAN></P><P class=MsoPlainText style="MARGIN: 0in 0in 0pt"><SPAN style="FONT-FAMILY: 'Courier New'"><SPAN style="mso-tab-count: 1">      </SPAN>Finally, enter this command for the userdef file: chmod a+rx<o:p></o:p></SPAN></P><P class=MsoPlainText style="MARGIN: 0in 0in 0pt"><SPAN style="FONT-FAMILY: 'Courier New'"><o:p> </o:p></SPAN></P><P class=MsoPlainText style="MARGIN: 0in 0in 0pt"><SPAN style="FONT-FAMILY: 'Courier New'">4- Check the NFS sharing properties of the pmshare directory: from the windows server, in Windows Explorer, go to the directory above the pmshare dir (probably D:\jmj). Right click on the pmshare directory, Properties. Click on the NFS Sharing directory and verify that the radio button Shared is selected. Make sure the Local path to be exported is correct and that the Exported Symbol matches the nfs shared path of the pmshare dir on windows server as stated in the mount command. Verify that by default, the Client Access rights are granted accecss and that the Directory Access Rights are Read/Write.<o:p></o:p></SPAN></P><P class=MsoPlainText style="MARGIN: 0in 0in 0pt"><SPAN style="FONT-FAMILY: 'Courier New'"><o:p> </o:p></SPAN></P><P class=MsoPlainText style="MARGIN: 0in 0in 0pt"><SPAN style="FONT-FAMILY: 'Courier New'">5- Check read-write integrity : go to the path of mount folder on unix server (probably /usr2/jmjshare). Create a test file: vi test.txt i testing (date and time) [Esc] :wq. Check the contents of the file: more test.txt. Go to the directory on the windows server (probably D:\jmj\pmshare), open the file with Notepad, edit it. Save changes and close.<o:p></o:p></SPAN></P><P class=MsoPlainText style="MARGIN: 0in 0in 0pt"><SPAN style="FONT-FAMILY: 'Courier New'"><o:p> </o:p></SPAN></P><P class=MsoPlainText style="MARGIN: 0in 0in 0pt"><SPAN style="FONT-FAMILY: 'Courier New'">6- Check NFS server settings: Go to Start, Programs, Omni NFS Server V4.2, NFS Server. Verify there is at least one row entered, specifically one for the pmshare directory on windows. Go to options, compare the settings to those at Snellville. Go to Mapping, Universal Account, compare the settings to those at Snellville. <o:p></o:p></SPAN></P><P class=MsoPlainText style="MARGIN: 0in 0in 0pt"><SPAN style="FONT-FAMILY: 'Courier New'"><o:p> </o:p></SPAN></P><P class=MsoPlainText style="MARGIN: 0in 0in 0pt"><SPAN style="FONT-FAMILY: 'Courier New'">Miscellaneous: <o:p></o:p></SPAN></P><P class=MsoPlainText style="MARGIN: 0in 0in 0pt"><SPAN style="FONT-FAMILY: 'Courier New'">-<SPAN style="mso-tab-count: 1">     </SPAN>The up arrow from the command prompt doesn't work in unix like it does in DOS.<o:p></o:p></SPAN></P><P class=MsoPlainText style="MARGIN: 0in 0in 0pt"><SPAN style="FONT-FAMILY: 'Courier New'">-<SPAN style="mso-tab-count: 1">     </SPAN>To logout out of root from the unix server, the command "logout" may work. If it doesn't don't worry, just exit the telnet session.<o:p></o:p></SPAN></P><P class=MsoPlainText style="MARGIN: 0in 0in 0pt"><SPAN style="FONT-FAMILY: 'Courier New'">-<SPAN style="mso-tab-count: 1">     </SPAN>To exit a telnet session, enter the command exit.<o:p></o:p></SPAN></P><P class=MsoPlainText style="MARGIN: 0in 0in 0pt"><SPAN style="FONT-FAMILY: 'Courier New'">-<SPAN style="mso-tab-count: 1">     </SPAN>If you have any questions, please see David Strube - David.Strube@jmjtech.com<o:p></o:p></SPAN></P><P class=MsoPlainText style="MARGIN: 0in 0in 0pt"><SPAN style="FONT-FAMILY: 'Courier New'">-<SPAN style="mso-tab-count: 1">     </SPAN>If all else fails, panic.<o:p></o:p></SPAN></P></p>